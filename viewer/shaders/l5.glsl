
uniform vec2 screenSize;
uniform Image h;

vec4 effect(vec4 color, Image tex, vec2 texture_coords, vec2 screen_coords)
{
    vec2 sc = mod(screen_coords, screenSize);
    int ig = 16; // # of input channel groups
    vec2 is = vec2(screenSize.x * ig, screenSize.y); // input size
    vec2 o = vec2(screenSize.x, 0.0); // offset

	vec4 h0 = Texel(h, (sc + o * 0.0) / is);
	vec4 h1 = Texel(h, (sc + o * 1.0) / is);
	vec4 h2 = Texel(h, (sc + o * 2.0) / is);
	vec4 h3 = Texel(h, (sc + o * 3.0) / is);
	vec4 h4 = Texel(h, (sc + o * 4.0) / is);
	vec4 h5 = Texel(h, (sc + o * 5.0) / is);
	vec4 h6 = Texel(h, (sc + o * 6.0) / is);
	vec4 h7 = Texel(h, (sc + o * 7.0) / is);
	vec4 h8 = Texel(h, (sc + o * 8.0) / is);
	vec4 h9 = Texel(h, (sc + o * 9.0) / is);
	vec4 h10 = Texel(h, (sc + o * 10.0) / is);
	vec4 h11 = Texel(h, (sc + o * 11.0) / is);
	vec4 h12 = Texel(h, (sc + o * 12.0) / is);
	vec4 h13 = Texel(h, (sc + o * 13.0) / is);
	vec4 h14 = Texel(h, (sc + o * 14.0) / is);
	vec4 h15 = Texel(h, (sc + o * 15.0) / is);

    int channelGroup = int(screen_coords.x / screenSize.x);
    if (channelGroup == 0) {
		float c0 = h0[0]*(-0.009844578802585602)+h0[1]*(-0.05971401184797287)+h0[2]*(0.04976142942905426)+h0[3]*(-0.062386855483055115)+h1[0]*(0.009275444783270359)+h1[1]*(0.042580652981996536)+h1[2]*(-0.05509811267256737)+h1[3]*(-0.060155365616083145)+h2[0]*(-0.06685925275087357)+h2[1]*(0.011719789355993271)+h2[2]*(-0.0040765684098005295)+h2[3]*(-0.10126007348299026)+h3[0]*(-0.08236339688301086)+h3[1]*(0.006591707933694124)+h3[2]*(-0.07635515183210373)+h3[3]*(-0.10083068907260895)+h4[0]*(-0.0015569598181173205)+h4[1]*(0.012454348616302013)+h4[2]*(0.07730395346879959)+h4[3]*(-0.02902931347489357)+h5[0]*(0.062248166650533676)+h5[1]*(0.09617101401090622)+h5[2]*(-0.05994267389178276)+h5[3]*(-0.003174812998622656)+h6[0]*(-0.02088012918829918)+h6[1]*(-0.05224037915468216)+h6[2]*(-0.09528522938489914)+h6[3]*(-0.05176864564418793)+h7[0]*(-0.05316702276468277)+h7[1]*(-0.06153428182005882)+h7[2]*(0.09333372861146927)+h7[3]*(-0.10977812111377716)+h8[0]*(-0.10455195605754852)+h8[1]*(-0.03457625210285187)+h8[2]*(-0.07698468118906021)+h8[3]*(-0.03795083239674568)+h9[0]*(-0.015506482683122158)+h9[1]*(0.08029676228761673)+h9[2]*(-0.06023998185992241)+h9[3]*(0.0635029673576355)+h10[0]*(0.041770678013563156)+h10[1]*(-0.08419596403837204)+h10[2]*(-0.05013878270983696)+h10[3]*(-0.08840260654687881)+h11[0]*(0.022502126172184944)+h11[1]*(0.0404542051255703)+h11[2]*(0.02681923843920231)+h11[3]*(-0.0804104432463646)+h12[0]*(-0.040533050894737244)+h12[1]*(0.10951109230518341)+h12[2]*(0.09805053472518921)+h12[3]*(0.0005593603127636015)+h13[0]*(0.047169215977191925)+h13[1]*(-0.018700003623962402)+h13[2]*(0.09634000808000565)+h13[3]*(0.0882919579744339)+h14[0]*(0.06552290916442871)+h14[1]*(0.07685942202806473)+h14[2]*(-0.017045918852090836)+h14[3]*(0.07935848832130432)+h15[0]*(0.0706581324338913)+h15[1]*(0.04221499338746071)+h15[2]*(0.004426418337970972)+h15[3]*(-0.06689506024122238)+(0.07302278280258179);
		float c1 = h0[0]*(0.010327362455427647)+h0[1]*(-0.07874639332294464)+h0[2]*(8.90337978489697e-05)+h0[3]*(-0.03841015323996544)+h1[0]*(-0.010626696981489658)+h1[1]*(0.032554056495428085)+h1[2]*(-0.012350647710263729)+h1[3]*(-0.024830687791109085)+h2[0]*(-0.10606134682893753)+h2[1]*(0.03784112632274628)+h2[2]*(0.04972723871469498)+h2[3]*(-0.09302718937397003)+h3[0]*(-0.013260402716696262)+h3[1]*(-0.04712744802236557)+h3[2]*(-0.05147600546479225)+h3[3]*(-0.11163200438022614)+h4[0]*(0.032760895788669586)+h4[1]*(0.09365016967058182)+h4[2]*(-0.04380318894982338)+h4[3]*(-0.03867219015955925)+h5[0]*(-0.059786610305309296)+h5[1]*(0.04294072091579437)+h5[2]*(0.07869154214859009)+h5[3]*(0.052916914224624634)+h6[0]*(0.0587012842297554)+h6[1]*(-0.0702146515250206)+h6[2]*(-0.0718042179942131)+h6[3]*(0.01895936205983162)+h7[0]*(-0.09122908115386963)+h7[1]*(0.0834406241774559)+h7[2]*(-0.022554708644747734)+h7[3]*(0.0065896469168365)+h8[0]*(-0.010907180607318878)+h8[1]*(-0.02232285775244236)+h8[2]*(-0.05536726862192154)+h8[3]*(0.03678685426712036)+h9[0]*(-0.050826799124479294)+h9[1]*(0.09714287519454956)+h9[2]*(0.045212775468826294)+h9[3]*(-0.010854825377464294)+h10[0]*(-0.05625177174806595)+h10[1]*(-0.0018402382265776396)+h10[2]*(0.011348523199558258)+h10[3]*(0.1095317080616951)+h11[0]*(-0.043798159807920456)+h11[1]*(0.020090686157345772)+h11[2]*(0.06405521929264069)+h11[3]*(-0.09957484155893326)+h12[0]*(-0.09797637164592743)+h12[1]*(-0.012654426507651806)+h12[2]*(-0.05284654721617699)+h12[3]*(0.09685511142015457)+h13[0]*(0.03829129785299301)+h13[1]*(0.020369209349155426)+h13[2]*(-0.05834929272532463)+h13[3]*(-0.0371176078915596)+h14[0]*(0.04751792550086975)+h14[1]*(-0.09933523088693619)+h14[2]*(0.025427302345633507)+h14[3]*(0.06961159408092499)+h15[0]*(0.0017162824515253305)+h15[1]*(0.045813556760549545)+h15[2]*(-0.031005965545773506)+h15[3]*(-0.0779147818684578)+(0.09089464694261551);
		float c2 = h0[0]*(0.04893428832292557)+h0[1]*(0.09595032781362534)+h0[2]*(-0.10699295252561569)+h0[3]*(-0.05228639394044876)+h1[0]*(0.06351879984140396)+h1[1]*(-0.05850222334265709)+h1[2]*(0.06895137578248978)+h1[3]*(-0.08891289681196213)+h2[0]*(0.0815744623541832)+h2[1]*(0.06869859993457794)+h2[2]*(-0.03910325467586517)+h2[3]*(-0.08576351404190063)+h3[0]*(0.07003205269575119)+h3[1]*(-0.0701105073094368)+h3[2]*(-0.06944505125284195)+h3[3]*(0.0438319630920887)+h4[0]*(0.024519987404346466)+h4[1]*(-0.03964384272694588)+h4[2]*(0.11607315391302109)+h4[3]*(0.0440860390663147)+h5[0]*(-0.008287872187793255)+h5[1]*(0.004164764657616615)+h5[2]*(0.044224828481674194)+h5[3]*(0.09544666111469269)+h6[0]*(0.11919505894184113)+h6[1]*(0.00011103176802862436)+h6[2]*(0.002518230816349387)+h6[3]*(0.08540360629558563)+h7[0]*(0.03081565350294113)+h7[1]*(0.03527846932411194)+h7[2]*(0.08776826411485672)+h7[3]*(0.01796780340373516)+h8[0]*(0.11574429273605347)+h8[1]*(0.07591023296117783)+h8[2]*(0.09959445893764496)+h8[3]*(-0.060903556644916534)+h9[0]*(-0.02773272804915905)+h9[1]*(0.05467807874083519)+h9[2]*(0.035882458090782166)+h9[3]*(0.04881804808974266)+h10[0]*(0.06090320646762848)+h10[1]*(-0.03613227233290672)+h10[2]*(-0.07685504108667374)+h10[3]*(0.05415999889373779)+h11[0]*(-0.003653997089713812)+h11[1]*(-0.07500407844781876)+h11[2]*(0.011130765080451965)+h11[3]*(-0.07654807716608047)+h12[0]*(0.035524915903806686)+h12[1]*(0.07849951833486557)+h12[2]*(-0.11800438910722733)+h12[3]*(-0.06426277756690979)+h13[0]*(-0.08371847122907639)+h13[1]*(-0.06038004532456398)+h13[2]*(0.08764327317476273)+h13[3]*(0.07101420313119888)+h14[0]*(0.06382181495428085)+h14[1]*(0.06301739811897278)+h14[2]*(-0.07143834978342056)+h14[3]*(-0.02167998068034649)+h15[0]*(0.10550612956285477)+h15[1]*(-0.04130689799785614)+h15[2]*(0.02544398047029972)+h15[3]*(-0.0689554363489151)+(-0.005374285392463207);
		float c3 = 1.0;
		return clamp(vec4(c0, c1, c2, c3), 0.0, 1.0);
    }
}
